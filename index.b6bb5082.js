document.addEventListener("DOMContentLoaded",()=>{let e;let t=document.getElementById("start-button"),n=document.getElementById("restart-button"),r=document.getElementById("score"),o=document.querySelectorAll(".field-cell"),l=document.querySelector(".message-win"),i=document.querySelector(".message-lose"),s=document.querySelector(".message-start"),c=0;function f(){e=[,,,,].fill().map(()=>[,,,,].fill(0)),c=0,y(),t.style.display="none",n.style.display="inline-block",s.style.display="none",o.forEach(e=>{e.innerHTML="",e.style.backgroundColor="#cdc1b4"}),a(),a(),d()}function a(){let t=[];for(let n=0;n<4;n++)for(let r=0;r<4;r++)0===e[n][r]&&t.push({x:n,y:r});if(t.length>0){let{x:n,y:r}=t[Math.floor(Math.random()*t.length)];e[n][r]=.9>Math.random()?2:4}}function d(){for(let t=0;t<4;t++)for(let n=0;n<4;n++){let r=e[t][n],l=o[4*t+n];l.textContent=0===r?"":r,l.style.backgroundColor=({0:"#cdc1b4",2:"#eee4da",4:"#ede0c8",8:"#f2b179",16:"#f59563",32:"#f67c5f",64:"#f65e3b",128:"#edcf72",256:"#edcc61",512:"#edc850",1024:"#edc53f",2048:"#edc22e"})[r]||"#3c3a32"}}function y(){r.textContent=c}function u(){a(),d(),function(){for(let t=0;t<4;t++)for(let n=0;n<4;n++)if(0===e[t][n]||n<3&&e[t][n]===e[t][n+1]||t<3&&e[t][n]===e[t+1][n])return!1;return!0}()?i.style.display="inline-block":function(){for(let t=0;t<4;t++)for(let n=0;n<4;n++)if(2048===e[t][n])return!0;return!1}()&&(l.style.display="inline-block",document.removeEventListener("keydown",m)),y()}function m(t){switch(t.key){case"ArrowUp":case"w":!function(){let t=JSON.parse(JSON.stringify(e)),n=!1;for(let t=0;t<4;t++){let r=e.map(e=>e[t]),o=g(r),l=o.newArray;l.some((e,t)=>e!==r[t])&&(n=!0);for(let n=0;n<4;n++)e[n][t]=l[n];c+=o.points}n&&JSON.stringify(t)!==JSON.stringify(e)&&u()}();break;case"ArrowDown":case"s":!function(){let t=JSON.parse(JSON.stringify(e)),n=!1;for(let t=0;t<4;t++){let r=e.map(e=>e[t]),o=g(r,!0),l=o.newArray;l.some((e,t)=>e!==r[t])&&(n=!0);for(let n=0;n<4;n++)e[n][t]=l[n];c+=o.points}n&&JSON.stringify(t)!==JSON.stringify(e)&&u()}();break;case"ArrowLeft":case"a":!function(){let t=JSON.parse(JSON.stringify(e)),n=!1;for(let t=0;t<4;t++){let r=e[t],o=g(r),l=o.newArray;l.some((e,t)=>e!==r[t])&&(n=!0),e[t]=l,c+=o.points}n&&JSON.stringify(t)!==JSON.stringify(e)&&u()}();break;case"ArrowRight":case"d":!function(){let t=JSON.parse(JSON.stringify(e)),n=!1;for(let t=0;t<4;t++){let r=e[t],o=g(r,!0),l=o.newArray;l.some((e,t)=>e!==r[t])&&(n=!0),e[t]=l,c+=o.points}n&&JSON.stringify(t)!==JSON.stringify(e)&&u()}()}}function g(e,t=!1){let n=t?[...e].reverse():[...e];n=n.filter(e=>0!==e);let r=0;for(let e=0;e<n.length-1;e++)n[e]===n[e+1]&&(n[e]*=2,n[e+1]=0,r+=n[e]);for(n=n.filter(e=>0!==e);n.length<4;)n.push(0);return t&&(n=n.reverse()),{newArray:n,points:r}}t.addEventListener("click",f),n.addEventListener("click",function(){confirm("Are you sure you want to start a new game? All progress will be lost.")&&(i.style.display="none",l.style.display="none",f())}),document.addEventListener("keydown",m)});
//# sourceMappingURL=index.b6bb5082.js.map
