!function(){function n(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=Array(r);e<r;e++)t[e]=n[e];return t}function r(r){return function(r){if(Array.isArray(r))return n(r)}(r)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(r)||function(r,e){if(r){if("string"==typeof r)return n(r,void 0);var t=Object.prototype.toString.call(r).slice(8,-1);if("Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(r,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}document.addEventListener("DOMContentLoaded",function(){var n,e=function(){n=Array(N).fill().map(function(){return Array(N).fill(0)}),k=0,i(),S.style.display="none",b.style.display="inline-block",J.style.display="none",w.forEach(function(n){n.innerHTML="",n.style.backgroundColor="#cdc1b4"}),t(),t(),o()},t=function(){for(var r=[],e=0;e<N;e++)for(var t=0;t<N;t++)0===n[e][t]&&r.push({x:e,y:t});if(r.length>0){var o=r[Math.floor(Math.random()*r.length)],i=o.x,a=o.y;n[i][a]=.9>Math.random()?2:4}},o=function(){for(var r=0;r<N;r++)for(var e=0;e<N;e++){var t=n[r][e],o=w[r*N+e];o.textContent=0===t?"":t,o.style.backgroundColor=c(t)}},i=function(){A.textContent=k},a=function(){t(),o(),v(),i()},c=function(n){return({0:"#cdc1b4",2:"#eee4da",4:"#ede0c8",8:"#f2b179",16:"#f59563",32:"#f67c5f",64:"#f65e3b",128:"#edcf72",256:"#edcc61",512:"#edc850",1024:"#edc53f",2048:"#edc22e"})[n]||"#3c3a32"},f=function(n){switch(n.key){case"ArrowUp":case"w":d();break;case"ArrowDown":case"s":m();break;case"ArrowLeft":case"a":l();break;case"ArrowRight":case"d":y()}},u=function(){document.removeEventListener("keydown",f)},s=function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e?r(n).reverse():r(n);t=t.filter(function(n){return 0!==n});for(var o=0,i=0;i<t.length-1;i++)t[i]===t[i+1]&&(t[i]*=2,t[i+1]=0,o+=t[i]);for(t=t.filter(function(n){return 0!==n});t.length<N;)t.push(0);return e&&(t=t.reverse()),{newArray:t,points:o}},l=function(){for(var r=JSON.parse(JSON.stringify(n)),e=!1,t=0;t<N;t++)!function(r){var t=n[r],o=s(t),i=o.newArray;i.some(function(n,r){return n!==t[r]})&&(e=!0),n[r]=i,k+=o.points}(t);e&&JSON.stringify(r)!==JSON.stringify(n)&&a()},y=function(){for(var r=JSON.parse(JSON.stringify(n)),e=!1,t=0;t<N;t++)!function(r){var t=n[r],o=s(t,!0),i=o.newArray;i.some(function(n,r){return n!==t[r]})&&(e=!0),n[r]=i,k+=o.points}(t);e&&JSON.stringify(r)!==JSON.stringify(n)&&a()},d=function(){for(var r=function(r){var e=n.map(function(n){return n[r]}),o=s(e),i=o.newArray;i.some(function(n,r){return n!==e[r]})&&(t=!0);for(var a=0;a<N;a++)n[a][r]=i[a];k+=o.points},e=JSON.parse(JSON.stringify(n)),t=!1,o=0;o<N;o++)r(o);t&&JSON.stringify(e)!==JSON.stringify(n)&&a()},m=function(){for(var r=function(r){var e=n.map(function(n){return n[r]}),o=s(e,!0),i=o.newArray;i.some(function(n,r){return n!==e[r]})&&(t=!0);for(var a=0;a<N;a++)n[a][r]=i[a];k+=o.points},e=JSON.parse(JSON.stringify(n)),t=!1,o=0;o<N;o++)r(o);t&&JSON.stringify(e)!==JSON.stringify(n)&&a()},v=function(){g()?h.style.display="inline-block":p()&&(O.style.display="inline-block",u())},g=function(){for(var r=0;r<N;r++)for(var e=0;e<N;e++)if(0===n[r][e]||e<N-1&&n[r][e]===n[r][e+1]||r<N-1&&n[r][e]===n[r+1][e])return!1;return!0},p=function(){for(var r=0;r<N;r++)for(var e=0;e<N;e++)if(2048===n[r][e])return!0;return!1},S=document.getElementById("start-button"),b=document.getElementById("restart-button"),A=document.getElementById("score"),w=document.querySelectorAll(".field-cell"),O=document.querySelector(".message-win"),h=document.querySelector(".message-lose"),J=document.querySelector(".message-start"),N=4,k=0;S.addEventListener("click",e),b.addEventListener("click",function(){confirm("Are you sure you want to start a new game? All progress will be lost.")&&(h.style.display="none",O.style.display="none",e())}),document.addEventListener("keydown",f)})}();
//# sourceMappingURL=index.8f5b7aac.js.map
